!function(t){var e=t("body"),i=t(".toc-container"),n=[];i.on("click",".item-name",function(t){t.preventDefault()}),i.on("click",".video-name",function(i){e.trigger("play.video.by.id",[+t(this).closest("li").data("videoId")])}),t(".toc-items li[data-item-id]").each(function(e,i){var r={id:t(i).data("itemId"),type:t(i).data("itemType")};n.push(r)}),e.on("get.toc.index",function(t,e,i){for(var r={index:-1,id:e,type:i},d=(n.length,0);d<n.length;d++){var a=n[d];a.type===i&&a.id===e&&(r={index:d,id:a.id,type:a.type})}return r}),e.on("get.current.item",function(t){return i.find(".toc-items li.current")}),e.on("get.toc",function(t,i,r){var d=(n.length,e.triggerHandler("get.toc.index",[i,r]));return e.triggerHandler("get.toc.elm",[d])}),e.on("prev.toc",function(t){var i=e.triggerHandler("get.current.item"),r=e.triggerHandler("get.toc.index",[i.data("itemId"),i.data("itemType")]);if(-1!==r.index){var d=n[--r.index];if(d)return e.triggerHandler("get.toc.elm",[d])}}),e.on("next.toc",function(t){var i=e.triggerHandler("get.current.item"),r=e.triggerHandler("get.toc.index",[i.data("itemId"),i.data("itemType")]),d=e.triggerHandler("is.last.toc",[r.id,r.type]);if(!d){var a=e.triggerHandler("get.toc.index",[r.id,r.type]);if(-1!==a.index){var o=n[++a.index];if(o)return e.triggerHandler("get.toc.elm",[o])}}}),e.on("is.last.toc",function(t,i,r){var d=n.length,a=e.triggerHandler("get.toc.index",[i,r]);return a.index==d-1?!0:!1}),e.on("get.toc.elm",function(e,i){return t('.toc-items li[data-item-id="'+i.id+'"][data-item-type="'+i.type+'"]')})}(jQuery);